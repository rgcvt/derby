import{s as k}from"./store-2cf63dc8.js";import{R as C}from"./RaceList-d467523b.js";import{r as y,k as B,o as c,f as E,g as r,S as w,e as d,d as R,c as n,F as I,h as i,a as N}from"./index-b5198652.js";import{P as S}from"./PageHeader-02641712.js";import"./Close-0a1e1c48.js";const V={key:0},L={key:0},F=N("p",null,"You neet to add cars before you can build the races.",-1),j={__name:"Races",setup(P){const t=y(k.appState.cars),e=y(k.appState.races),_=["red","yellow","green","blue"],g=()=>{confirm("This will delete all races, do you want to proceed?")&&(e.value.length=0)},x=()=>{e.value.length=0,t.value.forEach((l,o)=>{e.value.push({id:o+1,lanes:_.map(a=>({color:a,car:null,time:null})),complete:!1})}),t.value.forEach((l,o)=>{t.value[o].races=_.map(a=>({lane:a,race:null,time:null}))}),p(),p()},p=()=>{t.value.forEach((l,o)=>{e.value.forEach((a,m)=>{const f=l.races.findIndex(u=>u.race==null),v=l.races[f];if(v){const u=v.lane,b=a.lanes.find(s=>s.car==l.id),h=a.lanes.findIndex(s=>s.color==u&&s.car==null);!b&&h!=-1&&(e.value[m].lanes[h].car=l.id,t.value[o].races[f].race=m+1)}})}),e.value=e.value};return(l,o)=>{const a=B("router-link");return c(),E(w,null,{default:r(()=>[d(S,null,{title:r(()=>[R("Races")]),action:r(()=>[t.value.length>0?(c(),n("div",V,[e.value.length==0?(c(),n(I,{key:0},[e.value.length==0?(c(),n("button",{key:0,onClick:x}," Build Races ")):i("",!0)],64)):(c(),n("button",{key:1,onClick:g},"Delete Races"))])):i("",!0)]),_:1}),t.value.length==0?(c(),n("div",L,[F,d(a,{class:"button",to:"/cars"},{default:r(()=>[R("Add Cars")]),_:1})])):i("",!0),d(C)]),_:1})}}};export{j as default};
