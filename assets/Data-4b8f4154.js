import{r as b,o as m,c as p,a as e,F as w,b as D,d as B,w as E,e as v,t as c}from"./index-b5198652.js";import{s as x}from"./store-2cf63dc8.js";import{I as y}from"./InlineInput-cd265361.js";import{R as S}from"./RaceList-d467523b.js";import"./Close-0a1e1c48.js";const k=e("caption",null," Cars ",-1),F=e("thead",null,[e("tr",null,[e("th",null,"Number"),e("th",null,"Driver"),e("th",null,"Red Time"),e("th",null,"Yellow Time"),e("th",null,"Green Time"),e("th",null,"Blue Time")])],-1),L={class:"number"},T=["onSubmit"],M=["value"],V=e("label",null,[B("Car Driver "),e("input",{name:"driver",type:"text",placeholder:"Firstname McLastnamerson",required:""})],-1),q=e("button",null,"Save Car",-1),j=e("button",null,"New Car",-1),J={__name:"Data",setup(G){const n=b(x.appState.cars),o=b(x.appState.races),C=(a,t)=>{n.value[t].driver=a},R=(a,t)=>{n.value[t].id=a},g=a=>{const{id:t,driver:l}=Object.fromEntries(new FormData(a.target)),s={id:t,driver:l,races:i.map(r=>({lane:r,race:null,time:null}))};n.value.push(s),document.forms["new-car"].reset()},i=["red","yellow","green","blue"],I=()=>{o.value.length=0,n.value.forEach((a,t)=>{o.value.push({id:t+1,lanes:i.map(l=>({color:l,car:null,time:null})),complete:!1})}),n.value.forEach((a,t)=>{n.value[t].races=i.map(l=>({lane:l,race:null,time:null}))}),h(),h(),console.log(o)},h=()=>{n.value.forEach((a,t)=>{o.value.forEach((l,s)=>{const r=a.races.findIndex(d=>d.race==null),_=a.races[r];if(_){const d=_.lane,N=l.lanes.find(u=>u.car==a.id),f=l.lanes.findIndex(u=>u.color==d&&u.car==null);!N&&f!=-1&&(o.value[s].lanes[f].car=a.id,n.value[t].races[r].race=s+1)}})}),o.value=o.value};return(a,t)=>(m(),p(w,null,[e("table",null,[k,F,e("tbody",null,[(m(!0),p(w,null,D(n.value,(l,s)=>(m(),p("tr",null,[e("td",L,[v(y,{type:"text",placeholder:"1",onBlur:r=>R(r,s),value:l.id},null,8,["onBlur","value"])]),e("td",null,[v(y,{type:"text",placeholder:"Firstname McLastnamerson",onBlur:r=>C(r,s),value:l.driver},null,8,["onBlur","value"])]),e("td",null,c(l.races[0].time),1),e("td",null,c(l.races[1].time),1),e("td",null,c(l.races[2].time),1),e("td",null,c(l.races[3].time),1)]))),256))])]),e("form",{name:"new-car",onSubmit:E(g,["prevent"])},[e("label",null,[B("Car Number "),e("input",{name:"id",type:"number",value:n.value.length+1,required:""},null,8,M)]),V,q],40,T),j,e("button",{onClick:I},"Make Races"),v(S)],64))}};export{J as default};
