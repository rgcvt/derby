import{s as v}from"./store-2cf63dc8.js";import{_ as g,r as x,o as _,c as f,a as e,t as I,u as r,d as w,j as S,w as R,e as V,p as B,i as M,F as L,b as N,f as $,l as H,v as T}from"./index-b5198652.js";import{C as Z}from"./Close-0a1e1c48.js";const b=l=>(B("data-v-27fb136d"),l=l(),M(),l),D=["data-color"],F={class:"driver"},K={class:"meta"},j=b(()=>e("span",{class:"label"},"Car:",-1)),E=b(()=>e("span",{class:"label"},"Lane:",-1)),q={class:"color"},O=b(()=>e("button",{type:"submit"},null,-1)),P=b(()=>e("div",{class:"time-icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[e("path",{d:"M17.6177 5.9681L19.0711 4.51472L20.4853 5.92893L19.0319 7.38231C20.2635 8.92199 21 10.875 21 13C21 17.9706 16.9706 22 12 22C7.02944 22 3 17.9706 3 13C3 8.02944 7.02944 4 12 4C14.125 4 16.078 4.73647 17.6177 5.9681ZM12 20C15.866 20 19 16.866 19 13C19 9.13401 15.866 6 12 6C8.13401 6 5 9.13401 5 13C5 16.866 8.13401 20 12 20ZM11 8H13V14H11V8ZM8 1H16V3H8V1Z",fill:"currentColor"})])],-1)),U=["onKeyup","value"],z={__name:"RaceLane",props:{raceIndex:Number,laneIndex:Number},setup(l){const p=l,m=x(v.appState.races),t=x(v.appState.cars),c=m.value[p.raceIndex],s=c.lanes[p.laneIndex],h=d=>t.value.find(n=>n.id==d).driver,a=d=>{d.target.closest("form").querySelector('[type="submit"]').click()},i=d=>{const{time:o}=Object.fromEntries(new FormData(d.target));s.time=o;const n=t.value.findIndex(u=>u.id==s.car),y=t.value[n].races.findIndex(u=>u.race==c.id);t.value[n].races[y].time=o},C=d=>{d.target.closest("form").reset();const n=t.value.findIndex(u=>u.id==s.car),y=t.value[n].races.findIndex(u=>u.race==c.id);t.value[n].races[y].time=null};return(d,o)=>(_(),f("div",{class:"lane","data-color":r(s).color},[e("div",F,I(h(r(s).car)),1),e("ul",K,[e("li",null,[j,w(" #"+I(r(s).car),1)]),e("li",null,[E,e("span",q,I(r(s).color),1)])]),e("form",{class:"time-input",onSubmit:o[1]||(o[1]=R(n=>i(n),["prevent"]))},[O,P,e("input",{type:"number",name:"time",step:".001",max:"9.000",min:"2.000",onBlur:a,onKeyup:[S(R(a,["prevent"]),["enter"]),S(R(a,["prevent"]),["tab"])],value:r(s).time},null,40,U),e("button",{type:"button",onClick:o[0]||(o[0]=n=>C(n))},[V(Z)])],32)],8,D))}},A=g(z,[["__scopeId","data-v-27fb136d"]]);const G=["data-status"],J={class:"lanes"},Q={class:"race-footer"},W={class:"race-number"},X={class:"race-complete"},Y={__name:"Race",props:{raceIndex:Number},setup(l){const p=l,m=x(v.appState.races),t=x(v.appState),c=m.value[p.raceIndex],s=h=>{setTimeout(()=>{const a=m.value.filter(i=>i.complete==!1);a.length==1?(t.value.raceCurrentIndex=a[0].id-1,t.value.raceNextIndex=null):a.length>1?(console.log(a),t.value.raceCurrentIndex=a[0].id-1,t.value.raceNextIndex=a[1].id-1):(t.value.raceCurrentIndex=null,t.value.raceNextIndex=null)},10)};return(h,a)=>(_(),f("div",{class:"race","data-status":r(c).complete?"complete":"incomplete"},[e("div",J,[(_(!0),f(L,null,N(r(c).lanes,(i,C)=>(_(),$(A,{raceIndex:l.raceIndex,laneIndex:C},null,8,["raceIndex","laneIndex"]))),256))]),e("div",Q,[e("div",W,"Race "+I(r(c).id),1),e("label",X,[w(" Race Complete "),H(e("input",{type:"checkbox",onInput:a[0]||(a[0]=i=>s()),"onUpdate:modelValue":a[1]||(a[1]=i=>r(c).complete=i)},null,544),[[T,r(c).complete]])])])],8,G))}},ee=g(Y,[["__scopeId","data-v-8ecd544a"]]);const te={class:"races"},ae={__name:"RaceList",setup(l){const p=x(v.appState.races);return(m,t)=>(_(),f("div",te,[(_(!0),f(L,null,N(p.value,(c,s)=>(_(),$(ee,{raceIndex:s},null,8,["raceIndex"]))),256))]))}},oe=g(ae,[["__scopeId","data-v-6f373f41"]]);export{oe as R};
